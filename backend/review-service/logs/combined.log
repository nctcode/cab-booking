{"level":"debug","message":"Executing (default): SELECT 1+1 AS result","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"info","message":"‚úÖ PostgreSQL connected successfully","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_name = 'reviews'","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"debug","message":"Executing (default): SELECT pk.constraint_type as \"Constraint\",c.column_name as \"Field\", c.column_default as \"Default\",c.is_nullable as \"Null\", (CASE WHEN c.udt_name = 'hstore' THEN c.udt_name ELSE c.data_type END) || (CASE WHEN c.character_maximum_length IS NOT NULL THEN '(' || c.character_maximum_length || ')' ELSE '' END) as \"Type\", (SELECT array_agg(e.enumlabel) FROM pg_catalog.pg_type t JOIN pg_catalog.pg_enum e ON t.oid=e.enumtypid WHERE t.typname=c.udt_name) AS \"special\", (SELECT pgd.description FROM pg_catalog.pg_statio_all_tables AS st INNER JOIN pg_catalog.pg_description pgd on (pgd.objoid=st.relid) WHERE c.ordinal_position=pgd.objsubid AND c.table_name=st.relname) AS \"Comment\" FROM information_schema.columns c LEFT JOIN (SELECT tc.table_schema, tc.table_name, cu.column_name, tc.constraint_type FROM information_schema.TABLE_CONSTRAINTS tc JOIN information_schema.KEY_COLUMN_USAGE  cu ON tc.table_schema=cu.table_schema and tc.table_name=cu.table_name and tc.constraint_name=cu.constraint_name and tc.constraint_type='PRIMARY KEY') pk ON pk.table_schema=c.table_schema AND pk.table_name=c.table_name AND pk.column_name=c.column_name WHERE c.table_name = 'reviews' AND c.table_schema = 'public'","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"debug","message":"Executing (default): SELECT DISTINCT tc.constraint_name as constraint_name, tc.constraint_schema as constraint_schema, tc.constraint_catalog as constraint_catalog, tc.table_name as table_name,tc.table_schema as table_schema,tc.table_catalog as table_catalog,tc.initially_deferred as initially_deferred,tc.is_deferrable as is_deferrable,kcu.column_name as column_name,ccu.table_schema  AS referenced_table_schema,ccu.table_catalog  AS referenced_table_catalog,ccu.table_name  AS referenced_table_name,ccu.column_name AS referenced_column_name FROM information_schema.table_constraints AS tc JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name = 'reviews' AND tc.table_catalog = 'cab_booking_auth'","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"debug","message":"Executing (default): ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" SET NOT NULL;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" DROP DEFAULT;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" TYPE UUID;","service":"review-service","timestamp":"2026-01-26 18:36:08"}
{"level":"error","message":"‚ùå Unable to connect to PostgreSQL: column \"ride_id\" cannot be cast automatically to type uuid","name":"SequelizeDatabaseError","original":{"code":"42804","file":"tablecmds.c","hint":"You might need to specify \"USING ride_id::uuid\".","length":179,"line":"14507","name":"error","routine":"ATPrepAlterColumnType","severity":"ERROR","sql":"ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" SET NOT NULL;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" DROP DEFAULT;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" TYPE UUID;"},"parameters":{},"parent":{"code":"42804","file":"tablecmds.c","hint":"You might need to specify \"USING ride_id::uuid\".","length":179,"line":"14507","name":"error","routine":"ATPrepAlterColumnType","severity":"ERROR","sql":"ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" SET NOT NULL;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" DROP DEFAULT;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" TYPE UUID;"},"service":"review-service","sql":"ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" SET NOT NULL;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" DROP DEFAULT;ALTER TABLE \"reviews\" ALTER COLUMN \"ride_id\" TYPE UUID;","stack":"Error\n    at Query.run (/Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/node_modules/sequelize/lib/dialects/postgres/query.js:50:25)\n    at /Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/node_modules/sequelize/lib/sequelize.js:315:28\n    at process.processTicksAndRejections (node:internal/process/task_queues:103:5)\n    at async Review.sync (/Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/node_modules/sequelize/lib/model.js:984:11)\n    at async Sequelize.sync (/Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/node_modules/sequelize/lib/sequelize.js:377:9)\n    at async connectDB (/Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/src/config/database.js:37:7)\n    at async startServer (/Users/thuhang/DHHTTT18B-N22-cab-system/backend/review-service/src/server.js:11:5)","timestamp":"2026-01-26 18:36:08"}
{"level":"debug","message":"Database URL: postgresql://postgres:****@localhost:5432/cab_booking_reviews","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"debug","message":"Executing (default): SELECT 1+1 AS result","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"‚úÖ PostgreSQL connected successfully","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"üìä Database connection ready","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"debug","message":"Executing (default): SELECT table_name FROM information_schema.tables WHERE table_schema = 'public' AND table_type LIKE '%TABLE' AND table_name != 'spatial_ref_sys';","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"warn","message":"‚ö†Ô∏è Reviews table does not exist. Run: npm run seed","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"‚úÖ Database connected successfully","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"üöÄ Review Service running on port 3006","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"üìö API Documentation: http://localhost:3006/api-docs","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"level":"info","message":"üè• Health check: http://localhost:3006/health","service":"review-service","timestamp":"2026-01-26 18:41:38"}
{"database":"mongodb-atlas","level":"info","message":"Review Service initialized with MongoDB Atlas","service":"review-service","timestamp":"2026-01-27 12:41:43"}
{"0":"C","1":"o","10":"c","100":"i","101":"n","102":"g","103":" ","104":"t","105":"o","106":" ","107":"a","108":"c","109":"c","11":"o","110":"e","111":"s","112":"s","113":" ","114":"t","115":"h","116":"e","117":" ","118":"d","119":"a","12":"n","120":"t","121":"a","122":"b","123":"a","124":"s","125":"e","126":" ","127":"f","128":"r","129":"o","13":"n","130":"m","131":" ","132":"a","133":"n","134":" ","135":"I","136":"P","137":" ","138":"t","139":"h","14":"e","140":"a","141":"t","142":" ","143":"i","144":"s","145":"n","146":"'","147":"t","148":" ","149":"w","15":"c","150":"h","151":"i","152":"t","153":"e","154":"l","155":"i","156":"s","157":"t","158":"e","159":"d","16":"t","160":".","161":" ","162":"M","163":"a","164":"k","165":"e","166":" ","167":"s","168":"u","169":"r","17":" ","170":"e","171":" ","172":"y","173":"o","174":"u","175":"r","176":" ","177":"c","178":"u","179":"r","18":"t","180":"r","181":"e","182":"n","183":"t","184":" ","185":"I","186":"P","187":" ","188":"a","189":"d","19":"o","190":"d","191":"r","192":"e","193":"s","194":"s","195":" ","196":"i","197":"s","198":" ","199":"o","2":"u","20":" ","200":"n","201":" ","202":"y","203":"o","204":"u","205":"r","206":" ","207":"A","208":"t","209":"l","21":"a","210":"a","211":"s","212":" ","213":"c","214":"l","215":"u","216":"s","217":"t","218":"e","219":"r","22":"n","220":"'","221":"s","222":" ","223":"I","224":"P","225":" ","226":"w","227":"h","228":"i","229":"t","23":"y","230":"e","231":"l","232":"i","233":"s","234":"t","235":":","236":" ","237":"h","238":"t","239":"t","24":" ","240":"p","241":"s","242":":","243":"/","244":"/","245":"w","246":"w","247":"w","248":".","249":"m","25":"s","250":"o","251":"n","252":"g","253":"o","254":"d","255":"b","256":".","257":"c","258":"o","259":"m","26":"e","260":"/","261":"d","262":"o","263":"c","264":"s","265":"/","266":"a","267":"t","268":"l","269":"a","27":"r","270":"s","271":"/","272":"s","273":"e","274":"c","275":"u","276":"r","277":"i","278":"t","279":"y","28":"v","280":"-","281":"w","282":"h","283":"i","284":"t","285":"e","286":"l","287":"i","288":"s","289":"t","29":"e","290":"/","3":"l","30":"r","31":"s","32":" ","33":"i","34":"n","35":" ","36":"y","37":"o","38":"u","39":"r","4":"d","40":" ","41":"M","42":"o","43":"n","44":"g","45":"o","46":"D","47":"B","48":" ","49":"A","5":" ","50":"t","51":"l","52":"a","53":"s","54":" ","55":"c","56":"l","57":"u","58":"s","59":"t","6":"n","60":"e","61":"r","62":".","63":" ","64":"O","65":"n","66":"e","67":" ","68":"c","69":"o","7":"o","70":"m","71":"m","72":"o","73":"n","74":" ","75":"r","76":"e","77":"a","78":"s","79":"o","8":"t","80":"n","81":" ","82":"i","83":"s","84":" ","85":"t","86":"h","87":"a","88":"t","89":" ","9":" ","90":"y","91":"o","92":"u","93":"'","94":"r","95":"e","96":" ","97":"t","98":"r","99":"y","database":"mongodb-atlas","level":"error","message":"‚ùå Unable to connect to MongoDB Atlas:","service":"review-service","timestamp":"2026-01-27 12:41:53"}
{"database":"mongodb-atlas","level":"info","message":"Review Service initialized with MongoDB Atlas","service":"review-service","timestamp":"2026-01-27 13:01:09"}
{"database":"mongodb-atlas","level":"info","message":"‚úÖ MongoDB Atlas connected successfully","service":"review-service","timestamp":"2026-01-27 13:01:11"}
{"database":"mongodb-atlas","level":"info","message":"Review Service initialized with MongoDB Atlas","service":"review-service","timestamp":"2026-01-27 13:02:57"}
{"database":"mongodb-atlas","level":"info","message":"‚úÖ MongoDB Atlas connected successfully","service":"review-service","timestamp":"2026-01-27 13:03:00"}
{"database":"mongodb-atlas","level":"info","message":"üìä Database: review_db","service":"review-service","timestamp":"2026-01-27 13:03:00"}
{"database":"mongodb-atlas","level":"info","message":"üìç Host: ac-dwyn6sh-shard-00-00.9qtbkbd.mongodb.net","service":"review-service","timestamp":"2026-01-27 13:03:00"}
{"database":"mongodb-atlas","level":"info","message":"‚úÖ MongoDB Atlas connected successfully","service":"review-service","timestamp":"2026-01-27 13:03:00"}
{"database":"mongodb-atlas","level":"info","message":"üöÄ Review Service running on port 3006","service":"review-service","timestamp":"2026-01-27 13:03:00"}
{"database":"mongodb-atlas","level":"info","message":"üìä Database: MongoDB Atlas","service":"review-service","timestamp":"2026-01-27 13:03:00"}
{"database":"mongodb-atlas","level":"info","message":"üè• Health check: http://localhost:3006/health","service":"review-service","timestamp":"2026-01-27 13:03:00"}
